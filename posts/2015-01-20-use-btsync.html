<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="description" content="Code, design, systems">
    <title>blog.iyue.club - "使用btsync"</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/core.css" />
    <link rel="image_src" href="../favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="iyue.club" href="../rss.xml" />

  </head>
  <body>
    <div class="container">
      <div class="row head">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="page-header">
            <h1>
              <a href="../">blog.iyue.club
              </a>
            </h1>
          </div>
          <ul class="nav nav-pills header">
            <li>
              <a href="../">Home</a>
            </li>
            <li>
              <a href="../posts.html">Posts</a>
            </li>
            <li>
              <a href="../tags.html">Tags</a>
            </li>
            <li>
              <a href="../about.html">About</a>
            </li>
            <li>
              <a href="../rss.xml">RSS</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row content">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="post">
  <article>
    <header>
      <h2 class="post-title">"使用btsync"</h2>
      <p class="metadata">
        <span class="date">January 20, 2015</span> - <span class="tags"><a href="../tags/linux.html">linux</a>, <a href="../tags/fun.html">fun</a></span>
      </p>
    </header>
    <p><meta charset="UTF-8" /> 昨天从<a href="http://program-think.blogspot.com/">编程随想</a>的博客上知道了<a href="https://www.getsync.com/">btsync</a>这个东西，用来p2p分享文件很是方便，所以我也尝试了一下，配置很简单，我在自己的笔记本和公司电脑都装好了，这样上班的时候2台电脑同步文件就方便了。</p>
<p>但是遇到了一个有点麻烦的问题，在最初我能够脸上p2p网络，并且找到了供源的机器，但是就是没法和他们同步，总是提示和另一方时间偏差太大无法同步，搜了一下发现是系统时间设置的问题，通过<a href="https://wiki.archlinux.org/index.php/Time">wiki</a>又好好了解了一下linux的时间机制。</p>
<p>linux上的时间包括2种，一是硬件时间，另一个是系统时间。</p>
<ol style="list-style-type: decimal">
<li><p>硬件时间：(Real Time Clock, RTC)是由机器硬件记录的时间，根据<a href="http://www.tldp.org/LDP/sag/html/hw-sw-clocks.html">tldp</a>的说法，个人电脑都内建了一块独立的电池，来给一个时钟供电，这个时钟可以通过BIOS来设置，或者开机之后通过操作系统来设置。</p></li>
<li><p>系统时间:(software clock)，这个时间是由linux内核来设置的。在系统中存放着一个叫做<code>/etc/adjtime</code>的配置文件，我本机这个文件是7月份创建的，也就是我上次重装系统的时间，是linux的初始系统时间，之后linux估计用了某种还不清楚的手段，每次开机都会更新最新的系统时间。</p></li>
</ol>
<p>我的问题就是系统时间和硬件时间不一致，估计是因为双系统和windows共存导致的，解决方法就是通过执行<code>sudo hwclock --systz</code>来把系统时间和硬件时间都和本地时区的时间对齐。时区配置文件是<code>/etc/localtime</code>这个文件可以通过<code>timedatectl</code>命令来设置，也可以手动建立到<code>/usr/share/zoneinfo/Asia/Hong_Kong</code>的软链接，或者是直接复制<code>/usr/share/zoneinfo/Hong_Kong</code>到<code>/etc/localtime</code>来设置。</p>
  </article>
</div>
        </div>
      </div>
      <div class="row footer">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="bottom">
            Generated using <a href="http://jaspervdj.be/hakyll/">Hakyll</a>. Source available on <a href="https://github.com/xcaptain/xcaptain.github.io">GitHub</a>.
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
