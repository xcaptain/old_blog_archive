---
title: 创建自己的composer包
date: 2015-12-10 02:01 +0800
tags: php
---

最近在做服务重构与模块化的工作，以前的老代码太多复制粘贴的东西，现在由我来统一整理一下
涉及到的服务有：
1. api 主要的接口模块，大部分客户端交互由这个接口完成
2. image 图片服务，图片上传下载压缩等操作
3. chat 聊天服务
目前的成功就是这样的，等将来还可以继续拆分api接口，独立出更多小功能

在api和image中都会用到mq来与后端的java服务通信，原来的实现是自己封装的mq，同一个功能实现2次，
现在抽象出mq功能作为一个公共库，让这2个服务都能调用同一个mq的库。

主要涉及到的工具是composer，真是一个强大的武器。

1. 创建库

2. 提交package到git仓库

3. 配置项目的composer.json文件，引入刚刚新增的库

4.重新测试一遍原有的2个服务的功能
