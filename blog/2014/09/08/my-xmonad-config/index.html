
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>我的xmonad配置 - Joey's Blog</title>
  <meta name="author" content="joey">

  
  <meta name="description" content="xmonad是用haskell写的一个窗口管理器。所谓的窗口管理器和桌面环境最大的区别大概就是轻量和重量的区别吧。
之前用过gnome3, unity, kde4, xfce4等桌面环境，感觉功能和配置都差不多，而且额外安装了太多不必要的东西，
而且还很耗费系统资源。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xcaptain.github.io/blog/2014/09/08/my-xmonad-config">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Joey's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">-->
<!--<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">-->

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Joey's Blog</a></h1>
  
    <h2>Trying To Be A Hacker.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:xcaptain.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">我的xmonad配置</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-09-08T12:12:48+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>xmonad是用haskell写的一个窗口管理器。所谓的窗口管理器和桌面环境最大的区别大概就是轻量和重量的区别吧。
之前用过gnome3, unity, kde4, xfce4等桌面环境，感觉功能和配置都差不多，而且额外安装了太多不必要的东西，
而且还很耗费系统资源。上个月在tumblr看到了某个人的xmonad桌面截图，感觉特别cool，所以开始折腾xmonad，不过
刚开始接触这种窗口管理器还是比较费劲的。</p>

<p>首先得安装xmonad，我现在用的是archlinux64位版本。可以用<code>sudo pacman -S xmonad</code>，安装好了可以执行<code>xmonad --version</code>
看看版本，我的事0.11的版本。每次启动xmonad的时候都会从<code>~/.xmonad/</code>里面读取配置，所以安装完了之后还得检查一下
是否自动生成了这个目录，一般安装成功之后都会出现的。</p>

<p>然后就是配置桌面管理器了，因为我之前用的是gnome3的桌面环境，所以默认使用的桌面管理器是gdm，我如果要在登陆的时候
选择进入那个桌面环境就得把这个地方配置好。首先增加一条xmonad的入口配置：
<code>
[Desktop Entry]
Encoding=UTF-8
Type=Application
Name=Xmonad
Comment=Lightweight X11 tiled window manager written in Haskell
Exec=xmonad
Icon=xmonad
Terminal=false
StartupNotify=false
Categories=Application;
</code>
登出系统，然后在登陆界面就会出现xmonad的选项了。默认登陆进去应该是黑乎乎一片，因为就开启了一个wm，什么应用都没有
开。这时候可以输入<code>Alt Shift Return</code>，如果一切正常的话这个快捷键会打开一个终端。ok，有了终端一切都ok了，可以想做任何
在linux都可以执行的操作，比如说打开pidgin聊天，firefox上网，thunderbird读邮件啊。</p>

<p>不过默认的配置确实不好用，还是得上网搜点优化了的配置，</p>

<h2><code></h2>

<h2>&ndash; xmonad example config file.</h2>

<p>&ndash; A template showing all available configuration hooks,</p>

<h2>&ndash; and how to override the defaults in your own xmonad.hs conf file.</h2>

<h2>&ndash; Normally, you&rsquo;d only override those defaults you care about.</h2>

<p>import XMonad
import XMonad.Util.Run(spawnPipe)
import Data.Monoid
import System.Exit</p>

<p>import qualified XMonad.StackSet as W
import qualified Data.Map        as M</p>

<p>&ndash; The preferred terminal program, which is used in a binding below and by</p>

<h2>&ndash; certain contrib modules.</h2>

<p>myTerminal      = &ldquo;roxterm&rdquo;</p>

<p>&ndash; Whether focus follows the mouse pointer.
myFocusFollowsMouse :: Bool
myFocusFollowsMouse = True</p>

<p>&ndash; Whether clicking on a window to focus also passes the click to the window
myClickJustFocuses :: Bool
myClickJustFocuses = False</p>

<h2>&ndash; Width of the window border in pixels.</h2>

<p>myBorderWidth   = 1</p>

<p>&ndash; modMask lets you specify which modkey you want to use. The default
&ndash; is mod1Mask (&ldquo;left alt&rdquo;).  You may also consider using mod3Mask
&ndash; (&ldquo;right alt&rdquo;), which does not conflict with emacs keybindings. The</p>

<h2>&ndash; &ldquo;windows key&rdquo; is usually mod4Mask.</h2>

<p>myModMask       = mod4Mask</p>

<p>&ndash; The default number of workspaces (virtual screens) and their names.
&ndash; By default we use numeric strings, but any string may be used as a
&ndash; workspace name. The number of workspaces is determined by the length</p>

<h2>&ndash; of this list.</h2>

<h2>&ndash; A tagging example:</h2>

<h2>&ndash; > workspaces = [&ldquo;web&rdquo;, &ldquo;irc&rdquo;, &ldquo;code&rdquo; ] ++ map show [4..9]</h2>

<p>myWorkspaces = [&ldquo;1:term&rdquo;,&ldquo;2:web&rdquo;,&ldquo;3:code&rdquo;,&ldquo;4:vm&rdquo;,&ldquo;5:media&rdquo;] ++ map show [6..9]</p>

<h2>&ndash; Border colors for unfocused and focused windows, respectively.</h2>

<p>myNormalBorderColor  = &ldquo;#7c7c7c&rdquo;
myFocusedBorderColor = &ldquo;#ffb6b0&rdquo;</p>

<hr />

<h2>&ndash; Key bindings. Add, modify or remove key bindings here.</h2>

<p>myKeys conf@(XConfig {XMonad.modMask = modm}) = M.fromList $</p>

<pre><code>-- launch a terminal
[ ((modm .|. shiftMask, xK_Return), spawn $ XMonad.terminal conf)

-- launch dmenu
, ((modm               ,xK_p     ), spawn "dmenu-with-yeganesh")

-- launch firefox
, ((modm               ,xK_w     ), spawn "firefox")

-- lock screen
, ((modm .|. controlMask, xK_l), spawn "xscreensaver-command -lock")

-- screenshoot
, ((modm .|. shiftMask, xK_p), spawn "select-screenshoot")

-- grab the whole screen
, ((modm .|. controlMask .|. shiftMask, xK_p), spawn "screenshoot")

-- close focused window
, ((modm .|. shiftMask, xK_c     ), kill)

 -- Rotate through the available layout algorithms
, ((modm,               xK_space ), sendMessage NextLayout)

--  Reset the layouts on the current workspace to default
, ((modm .|. shiftMask, xK_space ), setLayout $ XMonad.layoutHook conf)

-- Resize viewed windows to the correct size
, ((modm,               xK_n     ), refresh)

-- Move focus to the next window
, ((modm,               xK_Tab   ), windows W.focusDown)

-- Move focus to the next window
, ((modm,               xK_j     ), windows W.focusDown)

-- Move focus to the previous window
, ((modm,               xK_k     ), windows W.focusUp  )

-- Move focus to the master window
, ((modm,               xK_m     ), windows W.focusMaster  )

-- Swap the focused window and the master window
, ((modm,               xK_Return), windows W.swapMaster)

-- Swap the focused window with the next window
, ((modm .|. shiftMask, xK_j     ), windows W.swapDown  )

-- Swap the focused window with the previous window
, ((modm .|. shiftMask, xK_k     ), windows W.swapUp    )

-- Shrink the master area
, ((modm,               xK_h     ), sendMessage Shrink)

-- Expand the master area
, ((modm,               xK_l     ), sendMessage Expand)

-- Push window back into tiling
, ((modm,               xK_t     ), withFocused $ windows . W.sink)

-- Increment the number of windows in the master area
, ((modm              , xK_comma ), sendMessage (IncMasterN 1))

-- Deincrement the number of windows in the master area
, ((modm              , xK_period), sendMessage (IncMasterN (-1)))

-- Toggle the status bar gap
-- Use this binding with avoidStruts from Hooks.ManageDocks.
-- See also the statusBar function from Hooks.DynamicLog.
--
-- , ((modm              , xK_b     ), sendMessage ToggleStruts)

-- Quit xmonad
, ((modm .|. shiftMask, xK_q     ), io (exitWith ExitSuccess))

-- Restart xmonad
, ((modm              , xK_q     ), spawn "xmonad --recompile; xmonad --restart")

-- Run xmessage with a summary of the default keybindings (useful for beginners)
</code></pre>

<p>&ndash;    , ((modm .|. shiftMask, xK_slash ), spawn (&ldquo;echo \&rdquo;&ldquo; ++ help ++ &rdquo;\&ldquo; | xmessage -file -&rdquo;))
    ]
    ++</p>

<pre><code>--
-- mod-[1..9], Switch to workspace N
-- mod-shift-[1..9], Move client to workspace N
--
[((m .|. modm, k), windows $ f i)
    | (i, k) &lt;- zip (XMonad.workspaces conf) [xK_1 .. xK_9]
    , (f, m) &lt;- [(W.greedyView, 0), (W.shift, shiftMask)]]
++

--
-- mod-{w,e,r}, Switch to physical/Xinerama screens 1, 2, or 3
-- mod-shift-{w,e,r}, Move client to screen 1, 2, or 3
--
[((m .|. modm, key), screenWorkspace sc &gt;&gt;= flip whenJust (windows . f))
    | (key, sc) &lt;- zip [xK_w, xK_e, xK_r] [0..]
    , (f, m) &lt;- [(W.view, 0), (W.shift, shiftMask)]]
</code></pre>

<hr />

<h2>&ndash; Mouse bindings: default actions bound to mouse events</h2>

<p>myMouseBindings (XConfig {XMonad.modMask = modm}) = M.fromList $</p>

<pre><code>-- mod-button1, Set the window to floating mode and move by dragging
[ ((modm, button1), (\w -&gt; focus w &gt;&gt; mouseMoveWindow w
                                   &gt;&gt; windows W.shiftMaster))

-- mod-button2, Raise the window to the top of the stack
, ((modm, button2), (\w -&gt; focus w &gt;&gt; windows W.shiftMaster))

-- mod-button3, Set the window to floating mode and resize by dragging
, ((modm, button3), (\w -&gt; focus w &gt;&gt; mouseResizeWindow w
                                   &gt;&gt; windows W.shiftMaster))

-- you may also bind events to the mouse scroll wheel (button4 and button5)
]
</code></pre>

<hr />

<p>&ndash; Layouts:</p>

<p>&ndash; You can specify and transform your layouts by modifying these values.
&ndash; If you change layout bindings be sure to use &lsquo;mod-shift-space&rsquo; after
&ndash; restarting (with &lsquo;mod-q&rsquo;) to reset your layout state to the new</p>

<h2>&ndash; defaults, as xmonad preserves your old layout settings by default.</h2>

<p>&ndash; The available layouts.  Note that each layout is separated by |||,</p>

<h2>&ndash; which denotes layout choice.</h2>

<p>myLayout = tiled ||| Mirror tiled ||| Full
  where
     &ndash; default tiling algorithm partitions the screen into two panes
     tiled   = Tall nmaster delta ratio</p>

<pre><code> -- The default number of windows in the master pane
 nmaster = 1

 -- Default proportion of screen occupied by master pane
 ratio   = 1/2

 -- Percent of screen to increment by when resizing panes
 delta   = 3/100
</code></pre>

<hr />

<p>&ndash; Window rules:</p>

<p>&ndash; Execute arbitrary actions and WindowSet manipulations when managing
&ndash; a new window. You can use this to, for example, always float a
&ndash; particular program, or have a client always appear on a particular</p>

<h2>&ndash; workspace.</h2>

<p>&ndash; To find the property name associated with a program, use
&ndash; > xprop | grep WM_CLASS</p>

<h2>&ndash; and click on the client you&rsquo;re interested in.</h2>

<p>&ndash; To match on the WM_NAME, you can use &lsquo;title&rsquo; in the same way that</p>

<h2>&ndash; &lsquo;className&rsquo; and &lsquo;resource&rsquo; are used below.</h2>

<p>myManageHook = composeAll
    [ className =? &ldquo;Chromium&rdquo;       &ndash;> doShift &ldquo;2:web&rdquo;
    , className =? &ldquo;Google-chrome&rdquo;  &ndash;> doShift &ldquo;2:web&rdquo;
    , className =? &ldquo;Firefox&rdquo;        &ndash;> doShift &ldquo;2:web&rdquo;
    , className =? &ldquo;Emacs&rdquo;          &ndash;> doShift &ldquo;3:code&rdquo;
    , className =? &ldquo;Gvim&rdquo;           &ndash;> doShift &ldquo;3:code&rdquo;
    , className =? &ldquo;Weechat&rdquo;        &ndash;> doShift &ldquo;5:media&rdquo;
    , className =? &ldquo;Pidgin&rdquo;         &ndash;> doShift &ldquo;5:media&rdquo;
    , className =? &ldquo;ThunderBird&rdquo;    &ndash;> doShift &ldquo;5:media&rdquo;
    , resource  =? &ldquo;desktop_window&rdquo; &ndash;> doIgnore
    , className =? &ldquo;Galculator&rdquo;     &ndash;> doFloat
    , className =? &ldquo;Steam&rdquo;          &ndash;> doFloat
    , className =? &ldquo;Gimp&rdquo;           &ndash;> doFloat
    , resource  =? &ldquo;gpicview&rdquo;       &ndash;> doFloat
    , className =? &ldquo;MPlayer&rdquo;        &ndash;> doFloat
    , className =? &ldquo;VirtualBox&rdquo;     &ndash;> doShift &ldquo;4:vm&rdquo;
    , className =? &ldquo;Xchat&rdquo;          &ndash;> doShift &ldquo;5:media&rdquo;
    , className =? &ldquo;stalonetray&rdquo;    &ndash;> doIgnore]</p>

<hr />

<p>&ndash; Event handling</p>

<h2>&ndash; * EwmhDesktops users should change this to ewmhDesktopsEventHook</h2>

<p>&ndash; Defines a custom handler function for X Events. The function should
&ndash; return (All True) if the default handler is to be run afterwards. To</p>

<h2>&ndash; combine event hooks use mappend or mconcat from Data.Monoid.</h2>

<p>myEventHook = mempty</p>

<hr />

<p>&ndash; Status bars and logging</p>

<p>&ndash; Perform an arbitrary action on each internal state change or X event.</p>

<h2>&ndash; See the &lsquo;XMonad.Hooks.DynamicLog&rsquo; extension for examples.</h2>

<p>myLogHook = return ()</p>

<hr />

<p>&ndash; Startup hook</p>

<p>&ndash; Perform an arbitrary action each time xmonad starts or is restarted
&ndash; with mod-q.  Used by, e.g., XMonad.Layout.PerWorkspace to initialize</p>

<h2>&ndash; per-workspace layout choices.</h2>

<p>&ndash; By default, do nothing.
myStartupHook = return ()</p>

<hr />

<p>&ndash; Now run xmonad with all the defaults we set up.</p>

<h2>&ndash; Run xmonad with the settings you specify. No need to modify this.</h2>

<p>main = do
     xmproc &lt;- spawnPipe &ldquo;xmobar ~/.xmonad/xmobar.hs&rdquo;
     xmonad $ defaults</p>

<p>&ndash; A structure containing your configuration settings, overriding
&ndash; fields in the default config. Any you don&rsquo;t override, will</p>

<h2>&ndash; use the defaults defined in xmonad/XMonad/Config.hs</h2>

<h2>&ndash; No need to modify this.</h2>

<p>defaults = defaultConfig {
      &ndash; simple stuff
        terminal           = myTerminal,
        focusFollowsMouse  = myFocusFollowsMouse,
        clickJustFocuses   = myClickJustFocuses,
        borderWidth        = myBorderWidth,
        modMask            = myModMask,
        workspaces         = myWorkspaces,
        normalBorderColor  = myNormalBorderColor,
        focusedBorderColor = myFocusedBorderColor,</p>

<pre><code>  -- key bindings
    keys               = myKeys,
    mouseBindings      = myMouseBindings,

  -- hooks, layouts
    layoutHook         = myLayout,
    manageHook         = myManageHook,
    handleEventHook    = myEventHook,
    logHook            = myLogHook,
    startupHook        = myStartupHook
}
</code></pre>

<p></code>
这个配置是我结合<code>/usr/share/x86_64-linux-ghc-7.8.3/xmonad-0.11/man/xmonad.hs</code>并且稍微自定义了一些键绑定。
还有一些缺陷，不知道为什么有些功能能够spawn成功，而有些功能则spawn失败。这个问题留待后续解决，因为还得
稍微学点haskell的东西。</p>

<p>过几天还得去公司试验一下多物理显示器下工作情况，如果对于多显示器支持也好的话就可以日常用了。</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">joey</span></span>

      








  


<time datetime="2014-09-08T12:12:48+08:00" pubdate data-updated="true"></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://xcaptain.github.io/blog/2014/09/08/my-xmonad-config/" data-via="" data-counturl="http://xcaptain.github.io/blog/2014/09/08/my-xmonad-config/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/09/02/php-array-splice/" title="Previous Post: php-array-splice">&laquo; php-array-splice</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/09/08/my-xmonad-config/">我的xmonad配置</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/02/php-array-splice/">Php-array-splice</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/31/use-fish-shell/">使用fish</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/25/customize-keyboard-layout/">Customize Keyboard Layout</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/21/ssh-login-without-password/">Ssh-login-without-password</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - joey -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
